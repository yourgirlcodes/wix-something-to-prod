"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rule = void 0;
const flynt_engine_1 = require("@wix/flynt-engine");
const annotations_1 = require("@wix/wix-protos/typed/wix/api/annotations");
const wix_1 = require("@wix/wix-protos/typed/wix");
const crud_utils_1 = require("../../crud-utils");
exports.rule = {
    description: 'validates CRUD QUERY method annotation',
    severity: flynt_engine_1.Severity.Error,
    run(ctx) {
        ctx.visit({
            visitMethod(method) {
                const crudOption = method.options.getTypedOption(wix_1.wix.api.crud);
                if (crudOption && crudOption.value.method === annotations_1.Crud.Method.QUERY) {
                    (0, crud_utils_1.validateQueryField)(crudOption.value.queryOptions, method, ctx);
                    (0, crud_utils_1.validateItemsField)(crudOption.value.queryOptions, method, method.response, ctx);
                    (0, crud_utils_1.validatePagingField)(crudOption.value.queryOptions, method, ctx);
                    (0, crud_utils_1.validateWqlField)(crudOption.value.queryOptions, method, ctx);
                }
            }
        });
    }
};
//# sourceMappingURL=index.js.map
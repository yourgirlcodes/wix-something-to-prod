"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rule = void 0;
const flynt_engine_1 = require("@wix/flynt-engine");
const wix_protos_1 = require("@wix/wix-protos");
exports.rule = {
    description: 'ExtendedFields should be read-only',
    breakIfNew: true,
    run(ctx) {
        ctx.visit({
            visitField(field) {
                if (field.fieldType.kind === flynt_engine_1.FieldKind.Message && field.fieldType.message.fqn === '.wix.common.data.dataextensions.ExtendedFields') {
                    const readOnlyOption = field.options.getTypedOption(wix_protos_1.wix.api.readOnly);
                    ctx.assert(readOnlyOption && readOnlyOption.value === true, {
                        errorAt: field,
                        message: `The field '${field.name}' of the '${field.fieldType.message.fqn}' type must have the annotation '[(.wix.api.readOnly) = true]'`
                    });
                }
            }
        });
    }
};
//# sourceMappingURL=index.js.map
# wnp-protoc-wrapper

A wrapper library for installing and running [protoc](https://github.com/protocolbuffers/protobuf/releases) generator for compatibility checks.
Currently uses version `3.11.4`. 

Supported OS:
 - linux 64bit
 - OSX 64bit (x64/arm64)
 
## install
```
npm install --save-dev @wix/wnp-protoc-wrapper
```

# Usage

## API 

### protoc(opts: object): Promise<void>
Executes `protoc` for all the *.proto files in the passed base folder and its sub-folders. 

The `opts` options:
 - `baseFolder` - (_string, mandatory_) the full path to the base folder containing proto files to be checked with `protoc`.
 - `includeFolders` - (_string[], optional_) additional paths to folders to be included in lookups for the proto files imports.
 - `outputFile` - where to output `protoc` descriptor files. If not set, output will be redirected to `/dev/null` 
 - `cliOptions` - (_string[], optional_) array of additional CLI options that will be passed to protoc

Returns 
 - an resolved promise if protoc generation completed successfully.
 - a promise rejected with protoc error if generation failed
 
NOTE: there is no side-effect created for this execution, that is, any generated files are removed after `protoc` execution completed.     

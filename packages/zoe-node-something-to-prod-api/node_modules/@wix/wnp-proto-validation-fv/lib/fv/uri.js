const {checkURI} = require('node-uri');

module.exports = {
  messages: {
    'string.uri': '\'{field}\' value must a valid URI',
  },
  alias: 'uri',
  schema: {
    type: 'custom',
    optional: true,
    check(value, errors) {
      if (typeof value !== 'string') {
        errors.push({type: 'string', actual: value});
      } else {
        try {
          checkURI(value);
        } catch (err) {
          errors.push({type: 'string.uri'});
        }
      }
      return value;
    }
  }
}; 
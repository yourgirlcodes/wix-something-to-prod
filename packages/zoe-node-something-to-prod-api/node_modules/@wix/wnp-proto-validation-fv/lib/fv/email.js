const { emailRegex } = require('@wix/wix-js-validations');

module.exports = {
  messages: {
    'string.email': '\'{field}\' value must be a valid email address',
  },
  alias: 'emailAddress',
  schema: {
    type: 'string',
    optional: true,
    custom(value, errors) {
      if (typeof value === 'string' && !emailRegex.test(value)) {
        errors.push({type: 'string.email'});
      }
      return value;
    }
  }
};
syntax = "proto3";

package wix.api.funnel.builder.hydra;

import "wix/api/validations.proto";
import "wix/api/annotations.proto";
import "google/api/annotations.proto";
import "google/protobuf/wrappers.proto";
import "com/wix/bookings/schedules/api/v1/entities/session.proto";


service BookingsService {

  rpc BookSession (BookSessionRequest) returns (BookSessionResponse) {
    option (google.api.http).post = "/v1/bookings/book";
    option (wix.api.exposure) = INTERNAL;
    option (wix.api.maturity) = ALPHA;
    option (wix.api.required) = "BookSessionRequest.meta_site_id";
    option (wix.api.required) = "BookSessionRequest.session";
    option (wix.api.required) = "BookSessionRequest.contact_details";
    option (wix.api.required) = "BookSessionRequest.form_fields";
  }

}

message BookSessionRequest {
  message ContactDetails {
    string email = 1 [(wix.api.format) = EMAIL];

    string name = 2 [(wix.api.minLength) = 1, (wix.api.maxLength) = 100];

    string phone = 3 [(wix.api.format) = PHONE];
  }

  string meta_site_id = 1 [(wix.api.format) = GUID];

  com.wix.bookings.schedules.api.v1.Session session = 2;

  ContactDetails contact_details = 3;

  map<string, string> form_fields = 4;

  google.protobuf.StringValue calendar_link_form_id = 5;
}

message BookSessionResponse {
  bool successful = 1;
}

import {StatefulLintRule} from '../../../../index';

export const rule: StatefulLintRule = {
  stateful: true,
  description: 'field leading comment should never decrease in length',
  run(ctx) {
    ctx.visit({
      visitField(field, prevState) {
        //This rule checks whether a field comment was changed and if yes, it will report
        //if the new comment is shorter than the previous one.
        if (prevState) {
          ctx.assert(prevState.sourceCode.leadingComments.length <= field.sourceCode.leadingComments.length, {errorAt: field});
        }
      }
    });
  }
};

import {LintRule, Severity, StatefulLintRuleContext} from '../../../../..';

export const rule: LintRule = {
  description: 'field numbers should not be changed',
  moreInfoUrl: 'http://www.field-number-changed.com',
  severity: Severity.Error,
  stateful: true,
  run(ctx: StatefulLintRuleContext) {
    ctx.visitModified({
      visitField(field, prevField) {
        ctx.assert(field.number === prevField.number, {errorAt: field});
      }
    });
  }
};

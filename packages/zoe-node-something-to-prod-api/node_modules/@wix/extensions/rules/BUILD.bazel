package(default_visibility = ["//visibility:public"])

scala_library(
    name = "protogen",
    srcs = ["Protogen.scala"],
    scalacopts = framework_scalac_opts(),
    deps = [
        ":protogen_plugin",
        "@bazel_tools//src/main/protobuf:worker_protocol_java_proto",
        "@com_google_protobuf_protobuf_java",
    ],
)

scala_library(
    name = "protogen_plugin",
    srcs = ["ProtogenPlugin.scala"],
    scalacopts = framework_scalac_opts(),
    deps = ["@com_google_protobuf_protobuf_java"],
)

scala_binary(
    name = "ScalaPBPlugin",
    srcs = ["ScalaPBPlugin.scala"],
    main_class = "framework.protos.rules.ScalaPBPlugin",
    unused_dependency_checker_ignored_targets = [
        "@com_thesamet_scalapb_protoc_bridge_2_12",
    ],
    deps = [
        "@com_google_protobuf_protobuf_java",
        "@com_thesamet_scalapb_compilerplugin_2_12",
        "@com_thesamet_scalapb_protoc_bridge_2_12",
    ],
)

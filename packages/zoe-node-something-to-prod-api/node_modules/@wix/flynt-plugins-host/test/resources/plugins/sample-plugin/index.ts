import {CliOption, FlyntCtx, FlyntOutput, FlyntPlugin, FormatSeverity} from '@wix/flynt-plugin-types';

export class SamplePlugin implements FlyntPlugin {
  opts: {param?: string} = {};

  readonly name = 'sample';

  getCliOptions(): CliOption[] {
    return [{name: 'param'}];
  }

  setOptions(opts: Record<string, any>) {
    this.opts = opts;
  }

  beforeWriteToOutputFile(ctx: FlyntCtx, output: FlyntOutput) {
    output.opts = {...ctx.opts};
  }

  getResultsBaseFolder(ctx: FlyntCtx): string {
    return ctx.opts.mainProtoFolder + '1';
  }

  getFormatSeverityFunction(_ctx: FlyntCtx): FormatSeverity {
    return () => '1';
  }
}

export function createPlugin(): FlyntPlugin {
  return new SamplePlugin();
}

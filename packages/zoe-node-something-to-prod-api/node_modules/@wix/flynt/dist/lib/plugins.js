"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.initPluginsRunner = exports.loadPluginsFromApi = exports.loadPluginsFromCli = void 0;
const flynt_plugins_host_1 = require("@wix/flynt-plugins-host");
const debug_1 = __importDefault(require("debug"));
const error_reporter_1 = require("./error-reporter");
async function loadPluginsFromCli(args) {
    const pluginsHost = (0, flynt_plugins_host_1.createFlyntPluginsCliHost)();
    await pluginsHost.loadPluginsFromCli(args);
    return pluginsHost;
}
exports.loadPluginsFromCli = loadPluginsFromCli;
async function loadPluginsFromApi(plugins) {
    const pluginsHost = (0, flynt_plugins_host_1.createFlyntPluginsHost)();
    if (plugins) {
        for (const plugin of plugins) {
            await pluginsHost.loadPlugin(plugin);
        }
    }
    return pluginsHost;
}
exports.loadPluginsFromApi = loadPluginsFromApi;
async function initPluginsRunner(pluginsHost, opts) {
    const flyntPlugins = pluginsHost.createPluginsRunner({
        opts,
        debug: (0, debug_1.default)('wix:flynt:plugins'),
        async reportError(error) {
            await (0, error_reporter_1.reportError)(error);
        }
    });
    await flyntPlugins.init();
    return flyntPlugins;
}
exports.initPluginsRunner = initPluginsRunner;
//# sourceMappingURL=plugins.js.map
#!/bin/bash

protoc $(find ../../../../syntax-tree/include -name "*.proto") -o fds/google.bin -I ../../../../syntax-tree/include --include_source_info
protoc $(find ../../../../../node_modules/@wix/extensions/src/main/proto -name "*.proto") -o fds/wix.bin -I ../../../../../node_modules/@wix/extensions/src/main/proto --descriptor_set_in fds/google.bin --include_source_info

protoc $(find protos-common -name "*.proto") -o fds/protos-common.bin -I protos-common/src/main/proto --descriptor_set_in fds/google.bin:fds/wix.bin --include_source_info
protoc $(find protos-query -name "*.proto") -o fds/protos-query.bin -I protos-query/src/main/proto --descriptor_set_in fds/protos-common.bin:fds/google.bin:fds/wix.bin --include_source_info

protoc $(find site-properties-api-proto -name "*.proto") -o fds/site-properties-api-proto.bin -I site-properties-api-proto/src/main/proto --descriptor_set_in fds/google.bin:fds/wix.bin --include_source_info
protoc $(find locations-web -name "*.proto") -o fds/locations-web.bin -I locations-web/proto --descriptor_set_in fds/protos-common.bin:fds/protos-query.bin:fds/site-properties-api-proto.bin:fds/google.bin:fds/wix.bin --include_source_info
protoc $(find common-api -name "*.proto") -o fds/common-api.bin -I common-api/src/main/proto --descriptor_set_in fds/protos-common.bin:fds/locations-web.bin:fds/site-properties-api-proto.bin:fds/google.bin:fds/wix.bin --include_source_info
protoc $(find schedule-api -name "*.proto") -o fds/schedule-api.bin -I schedule-api/src/main/proto --descriptor_set_in fds/protos-common.bin:fds/protos-query.bin:fds/common-api.bin:fds/locations-web.bin:fds/site-properties-api-proto.bin:fds/google.bin:fds/wix.bin --include_source_info
protoc $(find src -name "*.proto") -o fds/complex.bin -I src/main/proto --descriptor_set_in fds/protos-common.bin:fds/protos-query.bin:fds/common-api.bin:fds/locations-web.bin:fds/site-properties-api-proto.bin:fds/schedule-api.bin:fds/google.bin:fds/wix.bin --include_source_info

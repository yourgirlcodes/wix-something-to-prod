syntax = "proto3";

package wix.api.funnel.builder.hydra;

import "wix/api/validations.proto";
import "wix/api/annotations.proto";
import "google/api/annotations.proto";

service AdiService {

  // Get user segment
  rpc GetSegment (GetSegmentRequest) returns (GetSegmentResponse) {
    option (google.api.http).get = "/v1/adi/segment";
    option (wix.api.exposure) = INTERNAL;
    option (wix.api.maturity) = ALPHA;
    option (wix.api.required) = "GetSegmentRequest.industry_id";
    option (wix.api.required) = "GetSegmentRequest.structure_id";
    option (wix.api.required) = "GetSegmentRequest.post_reg_vertical";
  }

}

message Segment {
  enum Name {
    UNKNOWN = 0;
    REGULAR = 1;
    BLOG = 2;
    BOOKINGS = 3;
    EVENTS = 4;
    ONLINE_STORES = 5;
  }
}

message SubSegment {
  enum Name {
    UNKNOWN = 0;
    FITNESS = 1;
    WELLNESS = 2;
    EDUCATION = 3;
    GENERAL = 4;
  }
}

message GetSegmentRequest {
  // adi category search option property
  string industry_id = 1 [(wix.api.minLength) = 1, (wix.api.maxLength) = 100];

  // adi category search option property
  string structure_id = 2 [(wix.api.minLength) = 1, (wix.api.maxLength) = 100];

  // adi category search option property
  string post_reg_vertical = 3 [(wix.api.minLength) = 1, (wix.api.maxLength) = 100];
}

message GetSegmentResponse {
  // user calculated segment
  Segment.Name segment = 1;

  // some segments can be split into sub segments (e.g. bookings segment)
  SubSegment.Name sub_segment = 2;
}

syntax = "proto3";

package wix.common;

option java_multiple_files = true;
option java_package = "com.wix.common";

import "wix/api/annotations.proto";
import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";
import "wix/api/validations.proto";

message Image {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "id"
        field: "url"
        field: "height"
        field: "width"
    };
    // WixMedia image ID.
    string id = 1;
    // Image URL.
    string url = 2;
    // Original image height.
    int32 height = 3 [(.wix.api.readOnly) = true];
    // Original image width.
    int32 width = 4 [(.wix.api.readOnly) = true];
    // Image alt text. Optional.
    google.protobuf.StringValue alt_text = 5;
    // Image URL expiration date (when relevant). Optional
    google.protobuf.Timestamp url_expiration_date = 6 [(.wix.api.field_exposure) = PRIVATE];
}

// Deprecated - use VideoV2
message Video {
    option deprecated = true;
    option (.wix.api.decomposition_minimum_fields) = {
        field: "id"
        field: "url"
        field: "height"
        field: "width"
    };
    // WixMedia ID
    string id = 1;
    // URL of video
    string url = 2;
    // Original image height
    int32 height = 3 [(.wix.api.readOnly) = true];
    // Original image width
    int32 width = 4 [(.wix.api.readOnly) = true];
    // Video poster
    Image thumbnail = 5;
}

message VideoV2 {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "id"
        field: "resolutions"
    };
    // WixMedia ID.
    string id = 1;
    // Available resolutions for the video, starting with the optimal resolution.
    repeated VideoResolution resolutions = 2;
}

message VideoResolution {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "url"
        field: "height"
        field: "width"
        field: "poster"
        field: "format"
    };
    // Video URL.
    string url = 2;
    // Video height.
    int32 height = 3 [(.wix.api.readOnly) = true];
    // Video width.
    int32 width = 4 [(.wix.api.readOnly) = true];
    // Video thumbnail.
    Image poster = 5;
    // Video format for example, mp4, hls.
    string format = 6;
    // Video URL expiration date (when relevant). Optional
    google.protobuf.Timestamp url_expiration_date = 7 [(.wix.api.field_exposure) = PRIVATE];
}

message Audio {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "id"
        field: "url"
    };
    // WixMedia ID.
    string id = 1;
    // Audio URL.
    string url = 2;
    // Audio URL expiration date (when relevant). Optional
    google.protobuf.Timestamp url_expiration_date = 3 [(.wix.api.field_exposure) = PRIVATE];
}

message Document {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "id"
        field: "url"
    };
    // WixMedia ID.
    string id = 1;
    // Document URL.
    string url = 2;
    // Document URL expiration date (when relevant). Optional
    google.protobuf.Timestamp url_expiration_date = 3 [(.wix.api.field_exposure) = PRIVATE];
}

// Deprecated - Copy this message into your service, do not reference it
message MediaItem {
    option deprecated = true;
    option (.wix.api.decomposition_minimum_fields) = {
        field: "image"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "video"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "document"
    };
    oneof media {
        Image image = 1;
        Video video = 2;
        Document document = 3;
    }
}

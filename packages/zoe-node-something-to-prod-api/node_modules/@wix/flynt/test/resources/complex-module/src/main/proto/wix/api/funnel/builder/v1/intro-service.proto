syntax = "proto3";

package wix.api.funnel.builder.v1;

import "google/api/annotations.proto";
import "google/protobuf/wrappers.proto";

import "wix/api/annotations.proto";
import "wix/api/validations.proto";

import "wix/api/funnel/builder/v1/domain.proto";

service FunnelIntroService {
    rpc GetNextUrl (GetNextUrlRequest) returns (GetNextUrlResponse) {
        option (wix.api.maturity) = ALPHA;
        option (wix.api.exposure) = INTERNAL;
        option (google.api.http).post = "/v1/getNextUrl";
        option (wix.api.required) = "GetNextUrlRequest.metadata";
        option (wix.api.required) = "GetNextUrlRequest.currentQuestionAnswers";
    }

    rpc GetPageData (GetPageDataRequest) returns (GetPageDataResponse) {
        option (wix.api.maturity) = ALPHA;
        option (wix.api.exposure) = INTERNAL;
        option (google.api.http).post = "/v1/getPageData";
        option (wix.api.required) = "GetPageDataRequest.metadata";
    }
}

message GetNextUrlRequest {
    repeated string path = 1 [(wix.api.maxSize) = 20, (wix.api.minLength) = 1, (wix.api.maxLength) = 50];

    Metadata metadata = 2;

    repeated Answer currentQuestionAnswers = 3;

    map<string, string> specs = 4 [(wix.api.maxSize) = 50];
}

message GetNextUrlResponse {
    Page page = 1;

    google.protobuf.StringValue path = 2;

    google.protobuf.StringValue url = 3;
}

message GetPageDataRequest {
    repeated string path = 1 [(wix.api.maxSize) = 20, (wix.api.minLength) = 1, (wix.api.maxLength) = 50];

    Metadata metadata = 2;
}

message GetPageDataResponse {
    Page page = 1;

    string flow = 2;

    map<string, string> specs = 3;
}

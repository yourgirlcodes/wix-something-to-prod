syntax = "proto3";

package wix.common;

option java_multiple_files = true;
option java_outer_classname = "WixLinkProto";
option java_package = "com.wix.common";

import "wix/api/annotations.proto";
import "wix/api/validations.proto";
import "google/protobuf/wrappers.proto";

//The link object generated by panels in the editor and used by applications in Wix
message WixLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "external"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "page"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "anchor"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "dynamic_page"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "document"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "email"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "phone"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "address"
    };
    option (.wix.api.decomposition_minimum_fields) = {
        field: "whats_app"
    };
    oneof Link {
        ExternalLink external = 1;
        PageLink page = 2;
        AnchorLink anchor = 3;
        DynamicPageLink dynamic_page = 4;
        DocumentLink document = 5;
        EmailLink email = 6;
        PhoneLink phone = 7;
        AddressLink address = 8;
        WhatsAppLink whats_app = 9;
    }
}

message ExternalLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "url"
    };
    //The url of the page
    string url = 1 [(.wix.api.format) = URI];
    //Where this link should open, supports _self and _blank or any name the user chooses. _self means same page, _blank means new page.
    google.protobuf.StringValue target = 2;
}

message PageLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "page_id"
    };
    //The page id we want from the site
    string page_id = 1;
    //Where this link should open, supports _self and _blank or any name the user chooses. _self means same page, _blank means new page.
    google.protobuf.StringValue target = 2;
}

message AnchorLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "anchor_name"
        field: "anchor_data_id"
        field: "page_id"
    };
    //The name of the anchor
    string anchor_name = 1;
    //The data id (from the JSON page) of the anchor that should be used
    string anchor_data_id = 2;
    //The page id we want from the site
    string page_id = 3;
}

message DynamicPageLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "router_id"
        field: "inner_route"
        field: "anchor_data_id"
    };
    //The router that handles this link
    string router_id = 1;
    //The path data we'd like
    string inner_route = 2;
    //The data id (from the JSON page) of the anchor that should be used
    google.protobuf.StringValue anchor_data_id = 3;
}

message DocumentLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "doc_id"
        field: "name"
    };
    //The id of the document
    string doc_id = 1;
    //The name of the document for download purposes
    google.protobuf.StringValue name = 2;
    //If this document can be indexed by scrapers, default is false
    bool indexable = 3;
}

message EmailLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "recipient"
        field: "subject"
        field: "body"
    };
    //The email we will be sending a message to
    string recipient = 1 [(.wix.api.format) = EMAIL];
    //The subject of the email
    google.protobuf.StringValue subject = 2;
    //The body of the email
    google.protobuf.StringValue body = 3;
}

message PhoneLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "phone_number"
    };
    //The phone number we want to link to
    string phone_number = 1 [(.wix.api.format) = PHONE, (.wix.api.maxLength) = 100];
}

message AddressLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "address"
    };
    //An address that we can link to
    string address = 1;
}

message WhatsAppLink {
    option (.wix.api.decomposition_minimum_fields) = {
        field: "phone_number"
    };
    //The whatsApp phone number we want to connect with
    string phone_number = 1 [(.wix.api.format) = PHONE];
}
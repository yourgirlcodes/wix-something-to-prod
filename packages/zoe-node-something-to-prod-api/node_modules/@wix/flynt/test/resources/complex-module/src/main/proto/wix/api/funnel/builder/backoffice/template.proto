syntax = "proto3";

package wix.api.funnel.builder.backoffice;

import "wix/api/validations.proto";

message Template {
    string id = 1 [(wix.api.minLength) = 1, (wix.api.maxLength) = 100];

    string name = 2 [(wix.api.minLength) = 1, (wix.api.maxLength) = 100];

    // Current version of the template. Used for optimistic locking.
    // Operations which mutate the page will require the current expected version as a parameter and fail if it doesn't match.
    // Read-Only, cannot be changed by the API.
    int32 version = 3 [(wix.api.readOnly) = true];

    map<string, ContentComponentSchema> schema = 4;
}

message ContentComponentSchema {
    enum ContentComponentType {
        UNKNOWN = 0;
        NUMBER = 1;
        TEXT = 2;
        BOOLEAN = 3;
        DATE = 4;
        CHOICE_QUESTION = 5;
        FREE_TEXT_QUESTION = 6;
    }

    enum ContentLoader {
        NONE = 0;
        FLOW_PROGRESS = 1;
        BOOKING_TIME_SLOTS = 2;
        APP_SUGGESTIONS = 3;
    }

    ContentComponentType type = 1;

    ContentLoader loader = 2;

    // nested schema is available for complex types
    map <string, ContentComponentSchema> schema = 3;

    // option schema is available only for CHOICE_QUESTION
    map <string, ContentComponentSchema> optionSchema = 4;
}

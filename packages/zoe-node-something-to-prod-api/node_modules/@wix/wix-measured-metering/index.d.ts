import {WixMeasured} from '@wix/wix-measured';

export interface RawMetering {
  reportSuccess(opts?: {duration?: number; count?: number}): void;
  reportError(error: Error): void;
}

interface Completion {
  (): void;
  (error: Error): void;
}

type Callback = (done: Completion) => any;

declare class WixMeasuredMetering {
  constructor(measured: WixMeasured);

  promise<T>(key: string, value: string): (fn: () => Promise<T>) => (() => Promise<T>);
  raw(key: string, value: string): RawMetering;
  callback(key: string, value: string): (callback: Callback) => void;
}

export default WixMeasuredMetering;